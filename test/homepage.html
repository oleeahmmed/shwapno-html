<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dabur - Shwapno</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap');
    
    * { font-family: 'Rubik', sans-serif; }
    
    /* Mega Menu Desktop Hover */
    @media (min-width: 768px) {
      .mega-menu:hover .mega-menu-content { 
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
      .menu-item:hover > ul { 
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
      
      /* Keep submenu open when hovering over it */
      .menu-item > ul:hover {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
    }
    
    /* Transitions */
    .transition-all { transition: all 0.3s ease; }
    
    /* Mobile menu */
    .mobile-menu-open { transform: translateX(0) !important; }
    .overlay-active { opacity: 1 !important; visibility: visible !important; }
    
    /* Scrollbar */
    .thin-scrollbar::-webkit-scrollbar { width: 4px; }
    .thin-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
    .thin-scrollbar::-webkit-scrollbar-thumb { background: #888; border-radius: 2px; }
  </style>
</head>
<body class="bg-stone-50 md:bg-white">

  <!-- Mobile App Download Banner -->
  <div class="md:hidden bg-amber-300">
    <a href="#" class="block relative h-[35px] max-w-xs w-full mx-auto overflow-hidden">
      <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/app-download-mobile.png" alt="Download Shwapno App" class="absolute inset-0 w-full h-full object-contain">
    </a>
  </div>

  <!-- Header -->
  <header class="sticky top-0 left-0 z-50">
    <!-- Top Bar -->
    <div class="bg-red-600 text-white">
      <div class="flex items-center justify-start w-full px-2.5 py-1.5 md:px-5">
        <!-- Mobile Menu Toggle -->
        <button id="mobileMenuBtn" class="md:hidden w-4 mr-2">
          <span class="block w-4 h-0.5 bg-white mb-1"></span>
          <span class="block w-4 h-0.5 bg-white mb-1"></span>
          <span class="block w-4 h-0.5 bg-white"></span>
        </button>
        
        <!-- Logo -->
        <a href="/" class="block w-[70px] md:w-[120px]">
          <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/shwapno_logo.png" alt="Shwapno" class="max-w-[70px] md:max-w-[120px]">
        </a>
        
        <!-- Location Button -->
        <button id="locationBtn" class="hidden md:flex items-center bg-transparent h-[35px] border border-red-400 px-2 py-1 rounded-[3px] ml-10 max-w-[220px] min-w-[180px]">
          <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/delivery.svg" alt="delivery" class="w-5">
          <span class="text-xs text-left pl-2 overflow-hidden text-ellipsis">Select location</span>
        </button>
        
        <!-- Search Bar -->
        <div class="relative mx-auto w-6/12 max-w-[calc(100%-155px)] md:max-w-[calc(100%-800px)] md:w-[43%]">
          <input type="text" placeholder="Search products" id="searchInput" class="w-full h-[28.125px] md:h-9 rounded-full md:rounded-[5px] pl-2 pr-6 md:pr-14 text-[10px] md:text-xs text-neutral-800 outline-none focus:ring-2 focus:ring-red-600">
          <button id="searchBtn" class="absolute right-2.5 md:right-0 top-1/2 -translate-y-1/2 h-6 md:h-9 md:px-4 md:py-1.5 md:bg-yellow-400 md:rounded-r-[5px] flex items-center">
            <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/search.svg" alt="search" class="w-3 md:w-5">
          </button>
        </div>
        
        <!-- App Download (Desktop) -->
        <div class="hidden md:block mr-5 rounded-[3px]">
          <a href="#"><img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/app-download.png" alt="app_download" class="w-[175px]"></a>
        </div>
        
        <!-- Language Toggle -->
        <div class="hidden md:block mr-1.5">
          <button class="h-9 w-[68px] text-sm font-medium border border-red-400 rounded-[5px] hover:bg-red-400">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
        </div>
        
        <!-- Sign In Button -->
        <button id="loginBtn" class="text-sm h-auto md:h-9 px-0 md:px-2 flex items-center border-0 md:border md:border-red-400 md:rounded-[5px] hover:bg-red-400 transition">
          <span class="text-base mr-2">üë§</span>
          <span class="hidden md:block text-xs font-medium">Sign in</span>
        </button>
        
        <!-- User Settings (Mobile) -->
        <button class="md:hidden flex items-center h-6 pl-3 pr-2">
          <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/dot.svg" alt="menu" class="w-1">
        </button>
      </div>
    </div>

    <!-- Navigation Bar -->
    <div class="bg-white shadow-sm border-b border-gray-200 hidden md:block px-5">
      <div class="relative flex justify-between w-full">
        
        <!-- Mega Menu Container -->
        <div class="relative mega-menu w-1/5 -mx-2">
          <div class="flex items-center font-medium text-sm px-2 py-2.5 cursor-pointer">
            <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/megamenu-webtoggle.svg" alt="menu" class="max-h-[18px] mr-2">
            SHOP BY CATEGORY
          </div>
          
          <!-- Mega Menu Content -->
          <div class="mega-menu-content hidden absolute left-0 top-full bg-white shadow-lg w-[285px] max-h-[600px] overflow-auto z-50 py-1 pl-3 opacity-0 invisible transition-all">
            <ul class="list-none">
              
              <!-- Food Category -->
              <li class="menu-item relative">
                <a href="/food" class="flex items-center text-[17px] py-1.5 hover:text-red-600">
                  <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/66090cf4154e0665a3d21ea3_Food.webp" alt="Food" class="w-[25px] mr-2">
                  Food
                  <button class="ml-auto text-slate-400 pointer-events-none">‚Ä∫</button>
                </a>
                
                <!-- Food Submenu -->
                <ul class="hidden absolute left-[285px] top-0 bg-white shadow-lg w-[250px] max-h-[600px] overflow-auto z-50 opacity-0 invisible transition-all">
                  <li class="text-red-600 text-sm font-medium border-b border-neutral-200 px-3 py-2">Food</li>
                  
                  <li class="menu-item relative">
                    <a href="/fruits-and-vegetables" class="flex items-center text-[17px] px-3 py-2.5 hover:text-red-600">
                      Fruits & Vegetables
                      <button class="ml-auto text-slate-400 pointer-events-none">‚Ä∫</button>
                    </a>
                    
                    <ul class="hidden absolute left-[250px] top-0 bg-white shadow-lg w-[250px] max-h-[600px] overflow-auto z-50 opacity-0 invisible transition-all">
                      <li class="text-red-600 text-sm font-medium border-b border-neutral-200 px-3 py-2">Fruits & Vegetables</li>
                      <li><a href="/fresh-fruits" class="block text-[17px] px-3 py-2.5 hover:text-red-600">Fresh Fruits</a></li>
                      <li><a href="/fresh-vegetables" class="block text-[17px] px-3 py-2.5 hover:text-red-600">Fresh Vegetables</a></li>
                    </ul>
                  </li>
                  
                  <li><a href="/eggs" class="block text-[17px] px-3 py-2.5 hover:text-red-600">Eggs</a></li>
                </ul>
              </li>
              
              <!-- Baby Food & Care -->
              <li class="menu-item relative">
                <a href="/baby" class="flex items-center text-[17px] py-1.5 hover:text-red-600">
                  <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/65f15e5552799b9600c4073e_Baby_Food_Care.webp" alt="Baby" class="w-[25px] mr-2">
                  Baby Food & Care
                  <button class="ml-auto text-slate-400 pointer-events-none">‚Ä∫</button>
                </a>
                
                <ul class="hidden absolute left-[285px] top-0 bg-white shadow-lg w-[250px] max-h-[600px] overflow-auto z-50 opacity-0 invisible transition-all">
                  <li class="text-red-600 text-sm font-medium border-b border-neutral-200 px-3 py-2">Baby Food & Care</li>
                  <li><a href="/baby-food" class="block text-[17px] px-3 py-2.5 hover:text-red-600">Baby Food</a></li>
                </ul>
              </li>
              
            </ul>
          </div>
        </div>
        
        <!-- Top Links -->
        <div class="flex items-center px-2">
          <a href="/deals" class="bg-gradient-to-b from-transparent to-yellow-200 border border-amber-300 text-stone-800 text-[15px] px-4 py-2.5 rounded-full hover:text-sky-600">GREAT DEALS</a>
        </div>
        
        <!-- Our Outlets & Help -->
        <div class="w-1/5 text-right">
          <a href="/outlets" class="inline-flex items-center text-zinc-700 text-xs p-2">
            <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/store-location.4cae494d.jpg" alt="store" class="w-[15px] mr-2">
            Our outlets
          </a>
          <a href="/help" class="inline-flex items-center text-zinc-700 text-xs p-2">
            <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/help-line.369ee6bc.png" alt="help" class="w-[15px] mr-2">
            Help line
          </a>
        </div>
        
      </div>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div id="mobileOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 opacity-0 invisible transition-all"></div>

  <!-- Mobile Menu Sidebar -->
  <div id="mobileSidebar" class="fixed top-0 left-0 w-[290px] h-full bg-white z-50 overflow-auto -translate-x-full transition-all thin-scrollbar">
    <div class="p-4 border-b">
      <button id="closeMobileMenu" class="text-red-600 font-medium">‚úï Close</button>
    </div>
    
    <ul class="list-none">
      <li>
        <button class="mobile-submenu-btn flex items-center justify-between w-full px-4 py-3 text-left border-b hover:bg-gray-50" data-target="food-menu">
          <span class="flex items-center">
            <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/66090cf4154e0665a3d21ea3_Food.webp" alt="Food" class="w-6 mr-2">
            Food
          </span>
          <span class="arrow transition-transform">‚Ä∫</span>
        </button>
        <ul id="food-menu" class="hidden bg-gray-50">
          <li><a href="/eggs" class="block px-6 py-2 hover:bg-gray-100">Eggs</a></li>
        </ul>
      </li>
      
      <li>
        <button class="mobile-submenu-btn flex items-center justify-between w-full px-4 py-3 text-left border-b hover:bg-gray-50" data-target="baby-menu">
          <span class="flex items-center">
            <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/65f15e5552799b9600c4073e_Baby_Food_Care.webp" alt="Baby" class="w-6 mr-2">
            Baby Food & Care
          </span>
          <span class="arrow transition-transform">‚Ä∫</span>
        </button>
        <ul id="baby-menu" class="hidden bg-gray-50">
          <li><a href="/baby-food" class="block px-6 py-2 hover:bg-gray-100">Baby Food</a></li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Products Section -->
  <section class="max-w-7xl mx-auto py-6 md:py-8 px-3 md:px-4">
    <h2 class="text-xl md:text-2xl font-bold mb-4 md:mb-6">Dabur Products</h2>
    
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 md:gap-4">
      
      <!-- Product Card 1 -->
      <div class="bg-white rounded-lg shadow hover:shadow-xl transition-shadow p-3 md:p-4">
        <div class="relative mb-2 pb-[80%]">
          <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/65fa963ad61902ef23078de2_Dabur-Honey-500gm_1_415.webp" alt="Dabur Honey 500gm" class="absolute inset-0 w-full h-full object-contain">
        </div>
        <a href="#" class="text-xs md:text-sm font-medium hover:text-red-600 block mb-2">Dabur Honey 500gm</a>
        <div class="flex items-center mb-2 md:mb-3">
          <span class="text-zinc-700 text-[10px] md:text-xs line-through mr-1">‡ß≥465</span>
          <span class="text-red-600 text-xs md:text-sm font-medium">‡ß≥418.50</span>
        </div>
        <button class="add-to-bag w-full bg-red-600 text-white text-[10px] md:text-xs font-medium px-3 md:px-6 py-1.5 md:py-2 rounded hover:bg-red-700 transition" data-price="418.50" data-name="Dabur Honey 500gm">Add to Bag</button>
      </div>

      <!-- Product Card 2 -->
      <div class="bg-white rounded-lg shadow hover:shadow-xl transition-shadow p-3 md:p-4">
        <div class="relative mb-2 pb-[80%]">
          <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/65fa963ad61902ef23078dea_Dabur-Honey-100gm_1_415.webp" alt="Dabur Honey 100gm" class="absolute inset-0 w-full h-full object-contain">
        </div>
        <a href="#" class="text-xs md:text-sm font-medium hover:text-red-600 block mb-2">Dabur Honey 100gm</a>
        <div class="flex items-center mb-2 md:mb-3">
          <span class="text-red-600 text-xs md:text-sm font-medium">‡ß≥130</span>
        </div>
        <button class="add-to-bag w-full bg-red-600 text-white text-[10px] md:text-xs font-medium px-3 md:px-6 py-1.5 md:py-2 rounded hover:bg-red-700 transition" data-price="130" data-name="Dabur Honey 100gm">Add to Bag</button>
      </div>

      <!-- Product Card 3 -->
      <div class="bg-white rounded-lg shadow hover:shadow-xl transition-shadow p-3 md:p-4">
        <div class="relative mb-2 pb-[80%]">
          <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/65fa9654d61902ef230799d9_Dabur-Honey-1kg_1_415.webp" alt="Dabur Honey 1kg" class="absolute inset-0 w-full h-full object-contain">
        </div>
        <a href="#" class="text-xs md:text-sm font-medium hover:text-red-600 block mb-2">Dabur Honey 1kg</a>
        <div class="flex items-center mb-2 md:mb-3">
          <span class="text-red-600 text-xs md:text-sm font-medium">‡ß≥830</span>
        </div>
        <button class="add-to-bag w-full bg-red-600 text-white text-[10px] md:text-xs font-medium px-3 md:px-6 py-1.5 md:py-2 rounded hover:bg-red-700 transition" data-price="830" data-name="Dabur Honey 1kg">Add to Bag</button>
      </div>

      <!-- Product Card 4 -->
      <div class="bg-white rounded-lg shadow hover:shadow-xl transition-shadow p-3 md:p-4">
        <div class="relative mb-2 pb-[80%]">
          <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/65fa97a5d61902ef23080020_Dabur-Amla-Hair-Oil-200ml_1_415.webp" alt="Dabur Amla Hair Oil" class="absolute inset-0 w-full h-full object-contain">
        </div>
        <a href="#" class="text-xs md:text-sm font-medium hover:text-red-600 block mb-2">Dabur Amla Hair Oil 200ml</a>
        <div class="flex items-center mb-2 md:mb-3">
          <span class="text-red-600 text-xs md:text-sm font-medium">‡ß≥200</span>
        </div>
        <button class="add-to-bag w-full bg-red-600 text-white text-[10px] md:text-xs font-medium px-3 md:px-6 py-1.5 md:py-2 rounded hover:bg-red-700 transition" data-price="200" data-name="Dabur Amla Hair Oil 200ml">Add to Bag</button>
      </div>

    </div>
  </section>

  <!-- Location Modal -->
  <div id="locationModal" class="fixed inset-0 bg-black bg-opacity-50 z-[999] hidden items-center justify-center p-4">
    <div class="bg-white rounded-lg p-4 md:p-6 max-w-md w-full">
      <h3 class="text-lg md:text-xl font-semibold mb-4">Select Delivery Location</h3>
      
      <div class="mb-4">
        <label class="block text-sm font-medium mb-2">District</label>
        <select id="districtSelect" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:outline-none">
          <option value="">Select District</option>
          <option value="dhaka">Dhaka</option>
          <option value="chittagong">Chittagong</option>
        </select>
      </div>
      
      <div class="mb-4">
        <label class="block text-sm font-medium mb-2">Area</label>
        <select id="areaSelect" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:outline-none" disabled>
          <option value="">Select Area</option>
        </select>
      </div>
      
      <div class="mb-6">
        <label class="block text-sm font-medium mb-2">Store</label>
        <select id="storeSelect" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:outline-none" disabled>
          <option value="">Select Store</option>
        </select>
      </div>
      
      <div class="flex gap-3">
        <button id="confirmLocation" class="flex-1 bg-red-600 text-white px-4 py-2 text-sm rounded-md hover:bg-red-700 transition">Confirm</button>
        <button id="closeLocationModal" class="px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 z-[999] hidden items-center justify-center p-4">
    <div class="bg-white rounded-lg p-4 md:p-6 max-w-md w-full">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg md:text-xl font-semibold">Sign In</h3>
        <button id="closeLoginModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
      </div>
      
      <form id="loginForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-2">Phone Number</label>
          <input type="tel" id="loginPhone" placeholder="01XXXXXXXXX" pattern="[0-9]{11}" maxlength="11" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:outline-none" required>
          <span class="text-xs text-red-600 hidden" id="phoneError">Enter valid 11-digit phone</span>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">Password</label>
          <input type="password" id="loginPassword" placeholder="Password" minlength="6" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:outline-none" required>
          <span class="text-xs text-red-600 hidden" id="passwordError">Password min 6 characters</span>
        </div>
        
        <button type="submit" class="w-full bg-red-600 text-white px-4 py-2.5 rounded-md hover:bg-red-700 transition font-medium">Sign In</button>
      </form>
    </div>
  </div>

  <!-- Floating Cart Button (Desktop) -->
  <button id="desktopCartBtn" class="hidden md:block fixed right-4 top-1/2 -translate-y-1/2 z-40 bg-yellow-400 text-xs font-medium rounded shadow-lg">
    <span class="relative bg-red-600 text-white block px-3 pt-6 pb-2 rounded-t">
      <span class="absolute top-1 left-1/2 -translate-x-1/2 text-lg">üõí</span>
      <span id="desktopCartCount">0</span> items
    </span>
    <span class="bg-neutral-800 text-white block px-3 py-2 rounded-b">‡ß≥<span id="desktopCartTotal">0</span></span>
  </button>

  <!-- Mobile Bottom Nav -->
  <div class="fixed bottom-0 left-0 w-full bg-white shadow-lg z-40 flex items-center justify-evenly p-2 md:hidden">
    <button id="mobileLocationBtn" class="flex items-center text-xs">
      <span class="text-xl mr-2">üìç</span>
      <span class="text-left">Location</span>
    </button>
    <button id="mobileCartBtn" class="relative bg-red-600 text-white w-12 h-12 rounded-full flex items-center justify-center -translate-y-4 shadow-lg">
      <span class="text-xl">üõí</span>
      <span id="mobileCartCount" class="absolute -top-1 -right-1 bg-white text-black text-xs w-5 h-5 rounded-full flex items-center justify-center font-medium">0</span>
    </button>
    <button class="flex items-center text-xs">
      <span class="text-lg mr-2">üïê</span>
      <span class="text-left">7PM-8PM</span>
    </button>
  </div>

  <!-- Footer -->
  <footer class="bg-slate-100 pt-8 md:pt-10 pb-20 md:pb-10 mt-8 md:mt-10">
    <div class="max-w-[1180px] mx-auto px-4">
      <div class="text-center md:text-left mb-5">
        <img src="https://c.animaapp.com/mhg7hhd5T4EqAy/assets/shwapno_logo.png" alt="Shwapno" class="max-w-[120px] md:max-w-[158px] mx-auto md:mx-0 mb-3 md:mb-4">
        <div class="font-medium mb-2 text-sm md:text-base">Always Here for You</div>
        <div class="text-xs md:text-[13px]">Call Us: 16469 (9am-9pm, Everyday)</div>
        <div class="text-xs md:text-[13px]">Email: queries@acilogistics.net</div>
      </div>
    </div>
    
    <div class="bg-white text-xs text-center py-3 md:py-4">Copyright ¬© 2025</div>
  </footer>

  <script>
    let cartItems = [];
    let cartTotal = 0;

    const locationData = {
      dhaka: {
        areas: ['Dhanmondi', 'Gulshan', 'Uttara'],
        stores: {
          'Dhanmondi': ['Shwapno Dhanmondi 27', 'Shwapno Dhanmondi 2'],
          'Gulshan': ['Shwapno Gulshan 1', 'Shwapno Gulshan 2'],
          'Uttara': ['Shwapno Uttara Sector 3', 'Shwapno Uttara Sector 7']
        }
      },
      chittagong: {
        areas: ['Agrabad', 'Nasirabad'],
        stores: {
          'Agrabad': ['Shwapno Agrabad'],
          'Nasirabad': ['Shwapno Nasirabad']
        }
      }
    };

    // Mobile Menu
    document.getElementById('mobileMenuBtn').onclick = () => {
      document.getElementById('mobileSidebar').classList.add('mobile-menu-open');
      document.getElementById('mobileOverlay').classList.add('overlay-active');
    };

    document.getElementById('closeMobileMenu').onclick = () => {
      document.getElementById('mobileSidebar').classList.remove('mobile-menu-open');
      document.getElementById('mobileOverlay').classList.remove('overlay-active');
    };

    document.getElementById('mobileOverlay').onclick = () => {
      document.getElementById('mobileSidebar').classList.remove('mobile-menu-open');
      document.getElementById('mobileOverlay').classList.remove('overlay-active');
    };

    // Mobile Submenu
    document.querySelectorAll('.mobile-submenu-btn').forEach(btn => {
      btn.onclick = () => {
        const target = document.getElementById(btn.dataset.target);
        const arrow = btn.querySelector('.arrow');
        if (target.classList.contains('hidden')) {
          target.classList.remove('hidden');
          arrow.style.transform = 'rotate(90deg)';
        } else {
          target.classList.add('hidden');
          arrow.style.transform = 'rotate(0deg)';
        }
      };
    });

    // Location Modal
    const openLocation = () => {
      document.getElementById('locationModal').classList.remove('hidden');
      document.getElementById('locationModal').classList.add('flex');
    };

    document.getElementById('locationBtn')?.addEventListener('click', openLocation);
    document.getElementById('mobileLocationBtn')?.addEventListener('click', openLocation);

    document.getElementById('closeLocationModal').onclick = () => {
      document.getElementById('locationModal').classList.add('hidden');
      document.getElementById('locationModal').classList.remove('flex');
    };

    document.getElementById('districtSelect').onchange = (e) => {
      const district = e.target.value;
      const areaSelect = document.getElementById('areaSelect');
      const storeSelect = document.getElementById('storeSelect');
      
      areaSelect.innerHTML = '<option value="">Select Area</option>';
      storeSelect.innerHTML = '<option value="">Select Store</option>';
      storeSelect.disabled = true;
      
      if (district && locationData[district]) {
        areaSelect.disabled = false;
        locationData[district].areas.forEach(area => {
          const opt = document.createElement('option');
          opt.value = area;
          opt.textContent = area;
          areaSelect.appendChild(opt);
        });
      } else {
        areaSelect.disabled = true;
      }
    };

    document.getElementById('areaSelect').onchange = (e) => {
      const district = document.getElementById('districtSelect').value;
      const area = e.target.value;
      const storeSelect = document.getElementById('storeSelect');
      
      storeSelect.innerHTML = '<option value="">Select Store</option>';
      
      if (district && area && locationData[district].stores[area]) {
        storeSelect.disabled = false;
        locationData[district].stores[area].forEach(store => {
          const opt = document.createElement('option');
          opt.value = store;
          opt.textContent = store;
          storeSelect.appendChild(opt);
        });
      } else {
        storeSelect.disabled = true;
      }
    };

    document.getElementById('confirmLocation').onclick = () => {
      const area = document.getElementById('areaSelect').value;
      const store = document.getElementById('storeSelect').value;
      
      if (area && store) {
        const btn = document.getElementById('locationBtn');
        if (btn) btn.querySelector('span').textContent = area + ' - ' + store;
        document.getElementById('locationModal').classList.add('hidden');
        document.getElementById('locationModal').classList.remove('flex');
      } else {
        alert('Please select area and store');
      }
    };

    // Login Modal
    document.getElementById('loginBtn').onclick = () => {
      document.getElementById('loginModal').classList.remove('hidden');
      document.getElementById('loginModal').classList.add('flex');
    };

    document.getElementById('closeLoginModal').onclick = () => {
      document.getElementById('loginModal').classList.add('hidden');
      document.getElementById('loginModal').classList.remove('flex');
    };

    document.getElementById('loginForm').onsubmit = (e) => {
      e.preventDefault();
      
      const phone = document.getElementById('loginPhone').value;
      const password = document.getElementById('loginPassword').value;
      let valid = true;
      
      if (!/^[0-9]{11}$/.test(phone)) {
        document.getElementById('phoneError').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('phoneError').classList.add('hidden');
      }
      
      if (password.length < 6) {
        document.getElementById('passwordError').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('passwordError').classList.add('hidden');
      }
      
      if (valid) {
        alert('Login successful!');
        document.getElementById('loginModal').classList.add('hidden');
        document.getElementById('loginModal').classList.remove('flex');
        document.getElementById('loginForm').reset();
      }
    };

    // Add to Cart
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('add-to-bag')) {
        const btn = e.target;
        const price = parseFloat(btn.dataset.price);
        const name = btn.dataset.name;
        
        cartItems.push({ name, price });
        cartTotal += price;
        updateCart();
        
        const qtyDiv = document.createElement('div');
        qtyDiv.className = 'flex items-center justify-between bg-yellow-400 rounded overflow-hidden';
        qtyDiv.innerHTML = `
          <button class="qty-minus px-2 md:px-3 py-2 text-red-600 font-bold hover:bg-yellow-300 text-sm">‚àí</button>
          <span class="qty-num px-2 md:px-4 py-2 font-medium text-sm">1</span>
          <button class="qty-plus px-2 md:px-3 py-2 text-red-600 font-bold hover:bg-yellow-300 text-sm">+</button>
        `;
        qtyDiv.dataset.price = price;
        qtyDiv.dataset.name = name;
        
        btn.parentElement.replaceChild(qtyDiv, btn);
      }
      
      if (e.target.classList.contains('qty-plus')) {
        const qtyDiv = e.target.parentElement;
        const num = qtyDiv.querySelector('.qty-num');
        const qty = parseInt(num.textContent) + 1;
        num.textContent = qty;
        
        const price = parseFloat(qtyDiv.dataset.price);
        cartTotal += price;
        updateCart();
      }
      
      if (e.target.classList.contains('qty-minus')) {
        const qtyDiv = e.target.parentElement;
        const num = qtyDiv.querySelector('.qty-num');
        const qty = parseInt(num.textContent);
        
        if (qty > 1) {
          num.textContent = qty - 1;
          const price = parseFloat(qtyDiv.dataset.price);
          cartTotal -= price;
          updateCart();
        } else {
          const btn = document.createElement('button');
          btn.className = 'add-to-bag w-full bg-red-600 text-white text-[10px] md:text-xs font-medium px-3 md:px-6 py-1.5 md:py-2 rounded hover:bg-red-700 transition';
          btn.textContent = 'Add to Bag';
          btn.dataset.price = qtyDiv.dataset.price;
          btn.dataset.name = qtyDiv.dataset.name;
          
          qtyDiv.parentElement.replaceChild(btn, qtyDiv);
          
          const price = parseFloat(btn.dataset.price);
          cartTotal -= price;
          cartItems = cartItems.filter(item => item.name !== btn.dataset.name || item.price !== price);
          updateCart();
        }
      }
    });

    function updateCart() {
      const count = cartItems.length;
      const total = cartTotal.toFixed(2);
      
      document.getElementById('desktopCartCount').textContent = count;
      document.getElementById('desktopCartTotal').textContent = total;
      document.getElementById('mobileCartCount').textContent = count;
    }

    // Open Cart
    const openCart = () => {
      const cartDiv = document.createElement('div');
      cartDiv.id = 'cartSidebar';
      cartDiv.className = 'fixed top-0 right-0 w-full md:w-[400px] h-full bg-stone-50 z-[60] shadow-xl overflow-y-auto thin-scrollbar';
      
      cartDiv.innerHTML = `
        <div class="bg-yellow-400 px-4 py-3 flex items-center justify-between">
          <h3 class="text-sm md:text-base font-medium">üõí ${cartItems.length} items</h3>
          <button class="close-cart text-xs md:text-sm font-medium">‚úï Close</button>
        </div>
        <div class="p-3 md:p-4">
          ${cartItems.length === 0 ? '<p class="text-center text-gray-500 py-10">Your cart is empty</p>' :
            cartItems.map((item, i) => `
              <div class="bg-white rounded-lg p-2 md:p-3 mb-3 shadow">
                <div class="flex justify-between items-start">
                  <div>
                    <h4 class="text-xs md:text-sm font-medium mb-1">${item.name}</h4>
                    <p class="text-red-600 font-medium text-sm">‡ß≥${item.price}</p>
                  </div>
                  <button class="remove-cart-item text-red-600 text-lg" data-index="${i}">üóëÔ∏è</button>
                </div>
              </div>
            `).join('')
          }
        </div>
        <div class="absolute bottom-0 left-0 w-full bg-white border-t">
          <div class="flex">
            <div class="w-1/2 h-11 md:h-12 flex items-center justify-center bg-yellow-400 text-xs md:text-sm font-medium">
              Total: ‡ß≥${cartTotal.toFixed(2)}
            </div>
            <button class="w-1/2 h-11 md:h-12 bg-red-600 text-white text-xs md:text-sm font-medium hover:bg-red-700">
              Place Order
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(cartDiv);
      
      const overlay = document.createElement('div');
      overlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50';
      overlay.onclick = () => {
        cartDiv.remove();
        overlay.remove();
      };
      document.body.appendChild(overlay);
      
      cartDiv.querySelector('.close-cart').onclick = () => {
        cartDiv.remove();
        overlay.remove();
      };
      
      cartDiv.querySelectorAll('.remove-cart-item').forEach(btn => {
        btn.onclick = () => {
          const idx = parseInt(btn.dataset.index);
          cartTotal -= cartItems[idx].price;
          cartItems.splice(idx, 1);
          updateCart();
          cartDiv.remove();
          overlay.remove();
          if (cartItems.length > 0) openCart();
        };
      });
    };

    document.getElementById('desktopCartBtn')?.addEventListener('click', openCart);
    document.getElementById('mobileCartBtn')?.addEventListener('click', openCart);

    // Search
    document.getElementById('searchBtn').onclick = () => {
      const query = document.getElementById('searchInput').value.trim();
      if (query) alert('Searching: ' + query);
    };

    document.getElementById('searchInput').onkeypress = (e) => {
      if (e.key === 'Enter') document.getElementById('searchBtn').click();
    };

    // ESC key closes modals
    document.onkeydown = (e) => {
      if (e.key === 'Escape') {
        document.getElementById('locationModal').classList.add('hidden');
        document.getElementById('locationModal').classList.remove('flex');
        document.getElementById('loginModal').classList.add('hidden');
        document.getElementById('loginModal').classList.remove('flex');
        document.getElementById('mobileSidebar').classList.remove('mobile-menu-open');
        document.getElementById('mobileOverlay').classList.remove('overlay-active');
        document.getElementById('cartSidebar')?.remove();
        document.querySelectorAll('.fixed.inset-0.bg-black').forEach(el => el.remove());
      }
    };
  </script>
</body>
</html>